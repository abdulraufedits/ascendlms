import{i as $,f as D,j as M,k as R,c as j,b as r,a as C,w as O,u as g,l as q,e as _,t as B,m as T,g as S,q as U,n as I,o as V,R as z}from"./index-B5EhxOgZ.js";import{_ as F}from"./logo-CqzVxDT_.js";import{_ as P,I as G}from"./login-img-YAPEkNA1.js";import{c as H,s as A}from"./cookies-EJ_pqWQ6.js";const J={class:"font-small h-screen md:flex w-full justify-between items-center"},K={class:"w-full grid place-content-center h-screen"},Q={class:"w-80 h-2xl flex flex-col gap-6"},W=r("img",{class:"w-auto h-8",src:F,alt:""},null,-1),X=r("h1",{class:"text-3xl bold text-grey font-big font-bold"},"Login to your account",-1),Y={key:0,class:"text-red flex items-center gap-x-1 text-sm"},Z=r("ion-icon",{name:"alert-circle-outline"},null,-1),ee=r("input",{type:"submit",value:"Login",class:"cta font-big text-white font-medium cursor-pointer hover:bg-gray-900 transition-colors duration-300"},null,-1),te={class:"font-small text-center -mt-2"},se=r("h3",{class:"font-big text-center text-2xl"},"OR",-1),ae=r("button",{type:"submit"},[r("img",{src:P,alt:"Contniue with google"})],-1),oe={class:"bg-gray-100 h-screen w-full grid place-content-center max-sm:hidden"},ne=["src"],le={__name:"Login",setup(ce){const E=$();D(!0);const x=M(),b=H("id");b?fetch("https://ascendapi-b810cfaf8c4a.herokuapp.com/students").then(f=>f.json()).then(f=>{f.forEach(c=>{c.id==b?(localStorage.setItem("isAuthenticated","true"),v.push(`/student/${c.username}/dashboard`),E.getUserData(c),fetch("https://ascendapi-b810cfaf8c4a.herokuapp.com/courses").then(i=>i.json()).then(i=>{i.forEach(a=>{a.students.forEach(u=>{var t,l;if(u.id==c.id){const d=[],m=[],h=[],o=[];a.lectureNotes.forEach(e=>{e.students.forEach(s=>{s.id==c.id&&d.push({id:e.id,lectureName:e.lectureName,courseName:e.courseName,createdOn:e.createdOn,status:s.status})})}),a.assignments.forEach(e=>{e.students.forEach(s=>{s.id==c.id&&m.push({id:e.id,assignmentName:e.assignmentName,courseName:e.courseName,dueDate:e.dueDate,status:s.status})})}),a.quizzes.forEach(e=>{e.students.forEach(s=>{s.id==c.id&&h.push({id:e.id,quizName:e.quizName,courseName:e.courseName,dueDate:e.dueDate,status:s.status})})}),a.mentors.forEach(e=>{o.push({id:e.id,username:e.username,email:e.email,designation:e.designation,status:e.status})}),x.getCoursesData({id:a.id,courseName:a.courseName,courseDesc:a.courseDesc,percentage:(t=a.students.find(e=>e.id===c.id))==null?void 0:t.percentage,category:a.category,status:(l=a.students.find(e=>e.id===c.id))==null?void 0:l.status,lectureNotes:d,assignments:m,quizzes:h,announcements:a.announcements,mentors:o})}})})}).catch(i=>console.log(i))):fetch("https://ascendapi-b810cfaf8c4a.herokuapp.com/instructors").then(i=>i.json()).then(i=>{i.forEach(a=>{a.id==b?(localStorage.setItem("isAuthenticated","true"),v.push(`/instructor/${a.username}/dashboard`),E.getUserData(a),fetch("https://ascendapi-b810cfaf8c4a.herokuapp.com/courses").then(u=>u.json()).then(u=>{u.forEach(t=>{t.mentors.forEach(l=>{if(l.id==l.id){const d=[],m=[],h=[];t.lectureNotes.forEach(o=>{d.push({id:o.id,lectureName:o.lectureName,courseName:o.courseName,createdOn:o.createdOn,students:o.students})}),t.assignments.forEach(o=>{m.push({id:o.id,assignmentName:o.assignmentName,courseName:o.courseName,uploadedOn:o.dueDate,dueDate:o.dueDate,students:o.students})}),t.quizzes.forEach(o=>{h.push({id:o.id,quizName:o.quizName,courseName:o.courseName,uploadedOn:o.dueDate,dueDate:o.dueDate,students:o.students})}),x.getCoursesData({id:t.id,courseName:t.courseName,courseDesc:t.courseDesc,category:t.category,lectureNotes:d,assignments:m,quizzes:h,announcements:t.announcements})}})})})):N.value=!0})}).catch(i=>console.log(i))})}).catch(f=>console.log(f)):console.log(b);const w=D(""),y=D("");let N=D(!1);const k=D(""),v=R();function L(f,c){if(c.length<8){N.value=!0,k.value="Password must be at least 8 characters long";return}fetch("https://ascendapi-b810cfaf8c4a.herokuapp.com/students").then(i=>i.json()).then(i=>{i.forEach(a=>{a.email==f&&a.password==c?(localStorage.setItem("isAuthenticated","true"),v.push(`/student/${a.username}/dashboard`),E.getUserData(a),A("id",a.id,2),fetch("https://ascendapi-b810cfaf8c4a.herokuapp.com/courses").then(u=>u.json()).then(u=>{u.forEach(t=>{t.students.forEach(l=>{var d,m;if(l.id==a.id){const h=[],o=[],e=[],s=[];t.lectureNotes.forEach(n=>{n.students.forEach(p=>{p.id==a.id&&h.push({id:n.id,lectureName:n.lectureName,courseName:n.courseName,createdOn:n.createdOn,status:p.status})})}),t.assignments.forEach(n=>{n.students.forEach(p=>{p.id==a.id&&o.push({id:n.id,assignmentName:n.assignmentName,courseName:n.courseName,dueDate:n.dueDate,status:p.status})})}),t.quizzes.forEach(n=>{n.students.forEach(p=>{p.id==a.id&&e.push({id:n.id,quizName:n.quizName,courseName:n.courseName,dueDate:n.dueDate,status:p.status})})}),t.mentors.forEach(n=>{s.push({id:n.id,username:n.username,email:n.email,designation:n.designation,status:n.status})}),x.getCoursesData({id:t.id,courseName:t.courseName,courseDesc:t.courseDesc,percentage:(d=t.students.find(n=>n.id===a.id))==null?void 0:d.percentage,category:t.category,status:(m=t.students.find(n=>n.id===a.id))==null?void 0:m.status,lectureNotes:h,assignments:o,quizzes:e,announcements:t.announcements,mentors:s})}})})}).catch(u=>console.log(u))):(console.log("student gets false"),fetch("https://ascendapi-b810cfaf8c4a.herokuapp.com/instructors").then(u=>u.json()).then(u=>{u.forEach(t=>{t.email==f&&t.password==c?(localStorage.setItem("isAuthenticated","true"),v.push(`/instructor/${t.username}/dashboard`),E.getUserData(t),A("id",t.id,2),fetch("https://ascendapi-b810cfaf8c4a.herokuapp.com/courses").then(l=>l.json()).then(l=>{l.forEach(d=>{d.mentors.forEach(m=>{if(m.id==m.id){const h=[],o=[],e=[];d.lectureNotes.forEach(s=>{h.push({id:s.id,lectureName:s.lectureName,courseName:s.courseName,createdOn:s.createdOn,students:s.students})}),d.assignments.forEach(s=>{o.push({id:s.id,assignmentName:s.assignmentName,courseName:s.courseName,uploadedOn:s.dueDate,dueDate:s.dueDate,students:s.students})}),d.quizzes.forEach(s=>{e.push({id:s.id,quizName:s.quizName,courseName:s.courseName,uploadedOn:s.dueDate,dueDate:s.dueDate,students:s.students})}),x.getCoursesData({id:d.id,courseName:d.courseName,courseDesc:d.courseDesc,category:d.category,lectureNotes:h,assignments:o,quizzes:e,announcements:d.announcements})}})})})):(N.value=!0,k.value="Email address or password does not match")})}).catch(u=>console.log(u)))})})}return(f,c)=>(V(),j("div",J,[r("main",K,[r("div",Q,[C(g(z),{to:"/",class:"flex items-center font-extrabold font-big rounded outline-none focus:ring-1 focus:ring-gray-900 focus:ring-offset-2"},{default:O(()=>[W,_("   Ascend LMS ")]),_:1}),X,r("form",{action:"",class:"flex flex-col gap-4",onSubmit:c[2]||(c[2]=q(i=>L(w.value,y.value),["prevent"]))},[g(N)?(V(),j("div",Y,[Z,_(B(k.value),1)])):T("",!0),S(r("input",{autocomplete:"email",type:"email",class:I(["input-field",g(N)?"err":""]),placeholder:"email address","onUpdate:modelValue":c[0]||(c[0]=i=>w.value=i)},null,2),[[U,w.value]]),S(r("input",{autocomplete:"new-password",type:"password",class:I(["input-field",g(N)?"err":""]),placeholder:"password","onUpdate:modelValue":c[1]||(c[1]=i=>y.value=i)},null,2),[[U,y.value]]),C(g(z),{to:"/",class:"text-primary font-small text-right -mt-2"},{default:O(()=>[_("Forgot password?")]),_:1}),ee,r("p",te,[_("Don't have an account? "),C(g(z),{to:"/pre-signup",class:"text-primary"},{default:O(()=>[_("Sign up")]),_:1})])],32),se,ae])]),r("aside",oe,[r("img",{src:g(G),alt:"login image",class:"h-96"},null,8,ne)])]))}};export{le as default};
